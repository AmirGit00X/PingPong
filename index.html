<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ú†Øªâ€ŒØ±ÙˆÙ…</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;700&display=swap');
        body { font-family: 'Vazirmatn', sans-serif; background: #0f172a; color: white; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        h1 { color: #38bdf8; text-align: center; }
        
        /* Ø¨Ø®Ø´ Ù„Ø§Ú¯ÛŒÙ† */
        #admin-login { text-align: center; margin-top: 100px; }
        input { padding: 12px; border-radius: 8px; border: none; margin: 10px; width: 250px; }
        button { padding: 12px 20px; border-radius: 8px; border: none; cursor: pointer; background: #38bdf8; font-weight: bold; }

        /* Ø¨Ø®Ø´ Ù…Ø¯ÛŒØ±ÛŒØª */
        .section { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #334155; }
        .btn-del { background: #ef4444; color: white; padding: 5px 10px; font-size: 12px; }
        .btn-ban { background: #f59e0b; color: white; padding: 5px 10px; font-size: 12px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="container">
        <div id="admin-login">
            <h1>ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±ÛŒØª</h1>
            <input type="password" id="admin-pass" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø¯ÛŒØ±...">
            <button onclick="checkPass()">ÙˆØ±ÙˆØ¯</button>
        </div>

        <div id="admin-content" class="hidden">
            <h1>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª ğŸ› ï¸</h1>
            
            <div class="section">
                <h3>Ø¹Ù…Ù„ÛŒØ§Øª Ø³Ø±ÛŒØ¹</h3>
                <button onclick="clearAllMessages()" style="background: #b91c1c;">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ù„ Ú†Øªâ€ŒØ±ÙˆÙ… (Ø­Ø°Ù Ù‡Ù…Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§)</button>
            </div>

            <div class="section">
                <h3>Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ (ÛµÛ° Ù¾ÛŒØ§Ù… Ø¢Ø®Ø±)</h3>
                <div id="msg-list"></div>
            </div>

            <div class="section">
                <h3>Ù„ÛŒØ³Øª Ø³ÛŒØ§Ù‡ (Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ù† Ø´Ø¯Ù‡)</h3>
                <div id="ban-list"></div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDTZ68yTUyrpoKJdVRQzY7ZJ2mUUrWv-PM",
            databaseURL: "https://my-online-game-91998-default-rtdb.europe-west1.firebasedatabase.app/"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ (Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ†Ø¬Ø§ Ø¹ÙˆØ¶ Ú©Ù†ÛŒØ¯)
        const MASTER_PASS = "admin123";

        function checkPass() {
            const pass = document.getElementById('admin-pass').value;
            if(pass === MASTER_PASS) {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-content').classList.remove('hidden');
                loadAdminData();
            } else {
                alert("Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!");
            }
        }

        function loadAdminData() {
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù
            db.ref('messages').limitToLast(50).on('value', snap => {
                const list = document.getElementById('msg-list');
                list.innerHTML = "";
                snap.forEach(child => {
                    const data = child.val();
                    list.innerHTML += `
                        <div class="item">
                            <span><b>${data.name}:</b> ${data.message.substring(0,30)}...</span>
                            <div>
                                <button class="btn-ban" onclick="banUser('${data.name}')">Ø¨Ù† Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±</button>
                                <button class="btn-del" onclick="deleteMsg('${child.key}')">Ø­Ø°Ù Ù¾ÛŒØ§Ù…</button>
                            </div>
                        </div>
                    `;
                });
            });

            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒØ³Øª Ø¨Ù† Ø´Ø¯Ù‡â€ŒÙ‡Ø§
            db.ref('blacklist').on('value', snap => {
                const list = document.getElementById('ban-list');
                list.innerHTML = "";
                snap.forEach(child => {
                    list.innerHTML += `
                        <div class="item">
                            <span>${child.val().name}</span>
                            <button class="btn-del" onclick="unbanUser('${child.key}')">Ø¢Ø²Ø§Ø¯ Ø³Ø§Ø²ÛŒ</button>
                        </div>
                    `;
                });
            });
        }

        function deleteMsg(id) {
            if(confirm("Ù¾ÛŒØ§Ù… Ø­Ø°Ù Ø´ÙˆØ¯ØŸ")) db.ref('messages').child(id).remove();
        }

        function clearAllMessages() {
            if(confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ…Ø§Ù… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú†Øª Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ")) {
                db.ref('messages').remove();
            }
        }

        function banUser(userName) {
            if(confirm(`Ø¢ÛŒØ§ Ø§Ø² Ø¨Ù† Ú©Ø±Ø¯Ù† ${userName} Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ`)) {
                db.ref('blacklist').push({ name: userName });
            }
        }

        function unbanUser(id) {
            db.ref('blacklist').child(id).remove();
        }
    </script>
</body>
</html>
